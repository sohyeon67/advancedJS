<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>무한스크롤</title>
</head>
<body>
    <h1>모바일에서 많이 쓰이는 무한스크롤</h1>
    <h1>점점 데스크탑에서도 많이 쓰여용</h1>
    <div id="list">
        <h1>난 최고의 프로그래머당</h1>
        <h1>난 최고의 프로그래머당</h1>
        <h1>난 최고의 프로그래머당</h1>
        <h1>난 최고의 프로그래머당</h1>
        <h1>난 최고의 프로그래머당</h1>
        <h1>난 최고의 프로그래머당</h1>
        <h1>난 최고의 프로그래머당</h1>
        <h1>난 최고의 프로그래머당</h1>
        <h1>난 최고의 프로그래머당</h1>
        <h1>난 최고의 프로그래머당</h1>
        <h1>난 최고의 프로그래머당</h1>
        <h1>난 최고의 프로그래머당</h1>
        <h1>난 최고의 프로그래머당</h1>
        <h1>난 최고의 프로그래머당</h1>
        <h1>난 최고의 프로그래머당</h1>
        <h1>난 최고의 프로그래머당</h1>
    </div>
<script>
    // 스크롤바 이동!
    // window.scrollTo(0, 0);  // 구글 너네들 버그다.. 안움직인다!
                            // 우리 브라우저가 너무 성능이 좋아서 생기는 문제니 시간을 줘라

    setTimeout(function() {     // 대표적 비동기 함수, 브라우저가 지원하는 것이 아니고, os가 제공함
        window.scrollTo(0,0);   // 스크롤바 이동!
    }, 30)  // 30아래는 권장하지 않음

    // 스크롤 이벤트!
    // 안 외워도 됨, 거의 이런식으로 밖에 사용 안되니, 샘플만 잘 가지고 있으면 OK!
    function f_scroll() {
        console.log("scrollTop:", document.documentElement.scrollTop);
        console.log("clientHeight", document.documentElement.clientHeight);
        console.log("scrollHeight", document.documentElement.scrollHeight);

        var myScrollTop = document.documentElement.scrollTop;       // 얼마나 위로 올렸냥?
        var myClientHeight = document.documentElement.clientHeight; // 눈에 보이는 윈도우 높이
        var myScrollHeight = document.documentElement.scrollHeight; // 문서 전체 높이

        var tunningVal = 50;    // 실제로는 맨끝에 가기 전(살짝 위)에 처리
        // 스크롤바를 끝까지 내렸을 경우
        var myList = document.querySelector("#list");
        if((myScrollTop + myClientHeight) >= (myScrollHeight - tunningVal)) {
            //alert("스크롤 거의 끝까지 왔어용!! 뭔가 해주세용");
            // 보통 요기에 AJAX가 옴!
            // 일부는 처음에 로컬스토리지에 필요한 데이터를 다 가져다 놓고, 서버와의 통신없이
            // 로컬스토리지에서 꺼내오기도 함!

            for(var i=1; i<=6; i++) {
                var myH1 = document.createElement("h"+i);
                myH1.innerHTML = "난 최고의 프로그래머당"+i;
                myList.appendChild(myH1);
            }
        }

    }

    window.addEventListener("scroll", f_scroll);
</script>
</body>
</html>